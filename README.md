# ูุธุงู ุฅุฏุงุฑุฉ ุนูุงุฏุฉ ุงูุชุฎุณูุณ | Weight Loss Clinic Management System

## ๐ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุดุฑูุน

ูุธุงู ููุจ ูุชูุงูู ูุฅุฏุงุฑุฉ ุนูุงุฏุงุช ุงูุชุฎุณูุณ ูุนูู ุนูู ููุตุฉ Cloudflare Pages ูุน ูุงุนุฏุฉ ุจูุงูุงุช SQLite (D1). ูููุฑ ุงููุธุงู ุฅุฏุงุฑุฉ ูุงููุฉ ูููุฑุถูุ ุงูููุงุณุงุชุ ุงููุณุชุฎุฏูููุ ูุงูุฅุนุฏุงุฏุงุช.

## ๐ ุงูุฑูุงุจุท ุงููุจุงุดุฑุฉ

- **ุงูุชุทุจูู ุงููุจุงุดุฑ**: https://3000-ix40xp1h1vw8k57zfylxa-0e616f0a.sandbox.novita.ai
- **GitHub Repository**: (ูุฑูุจุงู)
- **Cloudflare Pages**: (ุจุนุฏ ุงููุดุฑ)

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ ุงููููุฐุฉ

### 1. ูุธุงู ุงููุตุงุฏูุฉ ูุงูุตูุงุญูุงุช
- โ ุชุณุฌูู ุฏุฎูู ุขูู
- โ ููุนุงู ูู ุงููุณุชุฎุฏููู: ูุฏูุฑ (Admin) ููุณุชุฎุฏู ุนุงุฏู (User)
- โ ุญูุงูุฉ ุงููุณุงุฑุงุช ุญุณุจ ุงูุตูุงุญูุงุช
- โ ุฌูุณุงุช ุนูู ุขููุฉ

### 2. ุฅุฏุงุฑุฉ ุงููุฑุถู
- โ ุฅุถุงูุฉ ูุฑูุถ ุฌุฏูุฏ ูุน ููุฏ ุชููุงุฆู (P001, P002, ...)
- โ ุชุนุฏูู ุจูุงูุงุช ุงููุฑูุถ
- โ ุญุฐู ูุฑูุถ
- โ ุงูุจุญุซ ุนู ุงููุฑุถู (ุจุงูุงุณูุ ุงูููุฏุ ุฃู ุฑูู ุงููุงุชู)
- โ ุนุฑุถ ูุงุฆูุฉ ุงููุฑุถู ูู ุฌุฏูู ููุธู
- โ ุญูุธ ุงูุจูุงูุงุช: ุงูุงุณูุ ุงูุณูุ ุงูููุนุ ุงููุงุชูุ ุงูุจุฑูุฏุ ุงูุฃูุฑุงุถ ุงููุฒููุฉุ ุงูุฃุฏููุฉุ ุงูููุงุญุธุงุช

### 3. ูุธุงู ุงูููุงุณุงุช
- โ ุฅุถุงูุฉ ููุงุณุงุช ุฌุฏูุฏุฉ ููู ุฒูุงุฑุฉ
- โ ุนุฑุถ ุงูุณุฌู ุงูุชุงุฑูุฎู ุงููุงูู ููููุงุณุงุช
- โ ุชุนุฏูู ุงูููุงุณุงุช
- โ ุญุฐู ุงูููุงุณุงุช
- โ ุญูุธ: ุงููุฒูุ ุงูุฏูููุ ุงูุนุถูุงุชุ ุงููุงุกุ BMRุ BMIุ FFMุ ูุนุฏู ุงูุญุฑูุ ููุงุญุธุงุช
- โ ุชุฑุชูุจ ุฒููู ูู ุงูุฃุญุฏุซ ููุฃูุฏู

### 4. ููุญุฉ ุงูุชุญูู (Dashboard)
- โ ุนุฑุถ ุฅุญุตุงุฆูุงุช ุนุงูุฉ (ุนุฏุฏ ุงููุฑุถูุ ุงูููุงุณุงุช)
- โ ูุงุฆูุฉ ุจุขุฎุฑ ุงููุฑุถู ุงููุณุฌููู
- โ ุฑูุงุจุท ุณุฑูุนุฉ ูููุธุงุฆู ุงูุฑุฆูุณูุฉ

### 5. ูุงุฌูุฉ ุงููุณุชุฎุฏู
- โ ุชุตููู ุงุญุชุฑุงูู ุจุงุณุชุฎุฏุงู Tailwind CSS
- โ ุฏุนู ุงูุงุชุฌุงู ูู ุงููููู ูููุณุงุฑ (RTL)
- โ ุฃููููุงุช Font Awesome
- โ ุฑุณุงุฆู ุชูุงุนููุฉ ูุชูุจููุงุช
- โ ููุงุฐุฌ ููุจุซูุฉ (Modals) ููุฅุถุงูุฉ ูุงูุชุนุฏูู
- โ ุฌุฏุงูู ููุธูุฉ ูุน ุชุฃุซูุฑุงุช Hover

### 6. ุงูุฏุนู ูุชุนุฏุฏ ุงููุบุงุช
- โ ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ (ุงูุชุฑุงุถู)
- โ ุฏุนู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ
- โ ูุธุงู ุชุฑุฌูุฉ ูุฑู ููุงุจู ููุชูุณุน

### 7. ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (Admin ููุท)
- โ ุนุฑุถ ูุงุฆูุฉ ุงููุณุชุฎุฏููู
- โ ุฅุถุงูุฉ ูุณุชุฎุฏููู ุฌุฏุฏ
- โ ุชุนุฏูู ุตูุงุญูุงุช ุงููุณุชุฎุฏููู
- โ ุชูุนูู/ุชุนุทูู ุญุณุงุจุงุช ุงููุณุชุฎุฏููู

### 8. ููุญุฉ ุงูุฅุนุฏุงุฏุงุช (Admin ููุท)
- โ ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงููุธุงู
- โ ุฅุนุฏุงุฏุงุช ุงูุญููู (ูุงุจูุฉ ููุชูุณุน)
- โ ูุงุนุฏุฉ ุจูุงูุงุช ุฌุงูุฒุฉ ูุญูุธ ุงูุฅุนุฏุงุฏุงุช

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `users` (ุงููุณุชุฎุฏููู)
- id, username, password_hash, full_name, role (admin/user), is_active, created_at, last_login

### ุฌุฏูู `patients` (ุงููุฑุถู)
- id, patient_code, name, age, gender, phone, email, chronic_diseases, medications, notes, created_at, updated_at, created_by

### ุฌุฏูู `measurements` (ุงูููุงุณุงุช)
- id, patient_id, measurement_date, weight, body_fat, muscle_mass, water_percentage, metabolism_rate, bmr, bmi, ffm, notes, created_by

### ุฌุฏูู `settings` (ุงูุฅุนุฏุงุฏุงุช)
- id, setting_key, setting_value, setting_type, description, updated_at

### ุฌุฏูู `field_settings` (ุฅุนุฏุงุฏุงุช ุงูุญููู)
- id, table_name, field_name, display_name_ar, display_name_en, is_visible, is_required, field_order

## ๐ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ

ูุชุถูู ุงููุธุงู ุจูุงูุงุช ุชุฌุฑูุจูุฉ ููุงุฎุชุจุงุฑ:
- **3 ูุฑุถู** ุจูุนูููุงุช ูุงููุฉ
- **7 ููุงุณุงุช** ููุฒุนุฉ ุนูู ุงููุฑุถู
- **2 ูุณุชุฎุฏููู** ุฌุงูุฒูู ููุงุณุชุฎุฏุงู

## ๐ ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู

### ุญุณุงุจ ุงููุฏูุฑ (Admin)
- **ุงุณู ุงููุณุชุฎุฏู**: `admin`
- **ูููุฉ ุงููุฑูุฑ**: `admin123`
- **ุงูุตูุงุญูุงุช**: ูุตูู ูุงูู ูุฌููุน ุงููุธุงุฆู

### ุญุณุงุจ ุงููุณุชุฎุฏู ุงูุนุงุฏู (Doctor)
- **ุงุณู ุงููุณุชุฎุฏู**: `doctor`
- **ูููุฉ ุงููุฑูุฑ**: `doctor123`
- **ุงูุตูุงุญูุงุช**: ุฅุฏุงุฑุฉ ุงููุฑุถู ูุงูููุงุณุงุช ููุท

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

### Backend
- **Hono Framework** - ุฅุทุงุฑ ุนูู ุฎููู ูุณุฑูุน
- **Cloudflare D1** - ูุงุนุฏุฉ ุจูุงูุงุช SQLite ููุฒุนุฉ ุนุงูููุงู
- **Cloudflare Pages** - ุงุณุชุถุงูุฉ Edge Computing

### Frontend
- **Vanilla JavaScript** - ุจุฏูู ููุชุจุงุช ุฅุถุงููุฉ
- **Tailwind CSS** - ุชุตููู ุณุฑูุน ูุฌููู (ุนุจุฑ CDN)
- **Font Awesome** - ุฃููููุงุช ุงุญุชุฑุงููุฉ (ุนุจุฑ CDN)

## ๐ ูููู ุงููุดุฑูุน

```
webapp/
โโโ src/
โ   โโโ index.tsx              # ุงูููู ุงูุฑุฆูุณู ููู Backend API
โโโ public/
โ   โโโ static/
โ       โโโ app.js             # ุชุทุจูู Frontend ุงููุงูู
โโโ migrations/
โ   โโโ 0001_initial_schema.sql  # ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ seed.sql                   # ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
โโโ wrangler.jsonc             # ุฅุนุฏุงุฏุงุช Cloudflare
โโโ package.json               # ุงูุชุจุนูุงุช ูุงูุณูุฑุจุชุงุช
โโโ ecosystem.config.cjs       # ุฅุนุฏุงุฏุงุช PM2 ููุชุทููุฑ
โโโ README.md                  # ูุฐุง ุงูููู
```

## ๐ ุงูุชุทููุฑ ุงููุญูู

### ุงููุชุทูุจุงุช
- Node.js 18+
- npm ุฃู yarn

### ุฎุทูุงุช ุงูุชุดุบูู

1. **ุชุซุจูุช ุงูุชุจุนูุงุช**
```bash
npm install
```

2. **ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญููุฉ**
```bash
npm run db:migrate:local
npm run db:seed
```

3. **ุจูุงุก ุงูุชุทุจูู**
```bash
npm run build
```

4. **ุชุดุบูู ุงูุชุทุจูู ูุญููุงู**
```bash
# ุจุงุณุชุฎุฏุงู PM2 (ููุตู ุจู ููุชุทููุฑ ูู Sandbox)
pm2 start ecosystem.config.cjs

# ุฃู ูุจุงุดุฑุฉ
npm run dev:sandbox
```

5. **ุงููุตูู ููุชุทุจูู**
- ุงูุชุญ ุงููุชุตูุญ ุนูู: http://localhost:3000

## ๐ ุงูุณูุฑุจุชุงุช ุงููุชุงุญุฉ

```bash
npm run dev              # Vite dev server
npm run dev:sandbox      # Wrangler dev ูุน D1
npm run build            # ุจูุงุก ุงูุชุทุจูู
npm run deploy           # ูุดุฑ ุนูู Cloudflare Pages
npm run db:migrate:local # ุชุทุจูู migrations ูุญููุงู
npm run db:migrate:prod  # ุชุทุจูู migrations ุนูู ุงูุฅูุชุงุฌ
npm run db:seed          # ุฅุถุงูุฉ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
npm run db:reset         # ุฅุนุงุฏุฉ ุชุนููู ูุงุนุฏุฉ ุงูุจูุงูุงุช
npm run clean-port       # ุชูุธูู ูููุฐ 3000
```

## ๐ ุงููุดุฑ ุนูู Cloudflare Pages

### ุงููุชุทูุจุงุช
- ุญุณุงุจ Cloudflare
- Cloudflare API Token

### ุฎุทูุงุช ุงููุดุฑ

1. **ุฅุนุฏุงุฏ Cloudflare API Token**
```bash
# ุณููุทูุจ ููู ุฅุฏุฎุงู API Token
wrangler login
```

2. **ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช D1 ุงูุฅูุชุงุฌูุฉ**
```bash
npx wrangler d1 create clinic-db
# ุงูุณุฎ database_id ูุงุณุชุจุฏูู ูู wrangler.jsonc
```

3. **ุชุทุจูู Migrations ุนูู ุงูุฅูุชุงุฌ**
```bash
npm run db:migrate:prod
```

4. **ุฅูุดุงุก ูุดุฑูุน Cloudflare Pages**
```bash
npx wrangler pages project create webapp --production-branch main
```

5. **ุงููุดุฑ**
```bash
npm run deploy
```

6. **ุงููุตูู ููุชุทุจูู**
- ุงูุชุทุจูู ุณูููู ูุชุงุญุงู ุนูู: https://webapp.pages.dev

## ๐จ ุงูุชุฎุตูุต ูุงูุชุทููุฑ

### ุฅุถุงูุฉ ุญููู ุฌุฏูุฏุฉ ูููุฑุถู

1. **ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช**
```sql
-- ุฃูุดุฆ ููู migration ุฌุฏูุฏ ูู migrations/
ALTER TABLE patients ADD COLUMN new_field TEXT;
```

2. **ุชุญุฏูุซ API ูู src/index.tsx**
```typescript
// ุฃุถู ุงูุญูู ุงูุฌุฏูุฏ ูู Create/Update endpoints
```

3. **ุชุญุฏูุซ ุงููููุฐุฌ ูู public/static/app.js**
```javascript
// ุฃุถู ุญูู ุงูุฅุฏุฎุงู ูู PatientModal()
```

### ุฅุถุงูุฉ ูุบุฉ ุฌุฏูุฏุฉ

ูู `public/static/app.js`:
```javascript
const translations = {
  ar: { ... },
  en: { ... },
  fr: {  // ูุบุฉ ุฌุฏูุฏุฉ
    appTitle: 'Systรจme de gestion de clinique',
    // ... ุจููุฉ ุงูุชุฑุฌูุงุช
  }
}
```

### ุชุฎุตูุต ุงูุฃููุงู ูุงูุชุตููู

ูุณุชุฎุฏู ุงูุชุทุจูู Tailwind CSSุ ููููู ุชุนุฏูู ุงูุฃููุงู ูู:
- `src/index.tsx` - ูู HTML ุงูุฑุฆูุณู
- `public/static/app.js` - ูู ูู component

## ๐ ุงูุฃูุงู

### ููุงุญุธุงุช ุฃูููุฉ ูููุฉ

โ๏ธ **ูุฐุง ูุธุงู ุชุฌุฑูุจู ููุชุทููุฑ**. ูุจู ุงูุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ:

1. **ูููุงุช ุงููุฑูุฑ**
   - ุงุณุชุฎุฏู bcrypt ูุชุดููุฑ ูููุงุช ุงููุฑูุฑ
   - ุบูุฑ ูููุงุช ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ

2. **ุงูุฌูุณุงุช (Sessions)**
   - ุงุณุชุฎุฏู Cloudflare KV ูุชุฎุฒูู ุงูุฌูุณุงุช
   - ุฃุถู ุงูุชูุงุก ุตูุงุญูุฉ ููุฌูุณุงุช
   - ุงุณุชุฎุฏู JWT tokens

3. **ุงูุชุญูู ูู ุงููุฏุฎูุงุช**
   - ุฃุถู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช (Validation)
   - ุงุณุชุฎุฏู Prepared Statements (ูุชููุฑ ุญุงููุงู)
   - ุชูุธูู ุงููุฏุฎูุงุช ูู XSS

4. **ุงูุตูุงุญูุงุช**
   - ุฑุงุฌุน ุตูุงุญูุงุช ูู endpoint
   - ุฃุถู Rate Limiting
   - ุณุฌู ุงูุนูููุงุช ุงูุญุณุงุณุฉ (Audit Log)

## ๐ ุงููุธุงุฆู ุงููุฎุทุทุฉ (ูุณุชูุจูุงู)

- [ ] ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ ุฅูู PDF
- [ ] ุฑุณูู ุจูุงููุฉ ูุชุชุจุน ุงูุชูุฏู
- [ ] ูุธุงู ุฅุดุนุงุฑุงุช ููููุงุนูุฏ
- [ ] ุญุณุงุจ BMI/BMR ุชููุงุฆูุงู
- [ ] ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู
- [ ] ุชูุงูู ูุน ุฃูุธูุฉ ุงูุฏูุน
- [ ] ุชุทุจูู ููุจุงูู (PWA)
- [ ] ุทุจุงุนุฉ ุจุทุงูุงุช ุงููุฑุถู
- [ ] ูุธุงู ุงูููุงุนูุฏ

## ๐ ุงูุฅุจูุงุบ ุนู ุงููุดุงูู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุชุญูู ูู console ุงููุชุตูุญ
2. ุฑุงุฌุน logs PM2: `pm2 logs clinic-webapp`
3. ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช: `npm run db:console:local`

## ๐จโ๐ป ุงููุทูุฑ

ุชู ุชุทููุฑ ูุฐุง ุงููุธุงู ููููุฐุฌ ุนููู ูุงูู ูุฅุฏุงุฑุฉ ุนูุงุฏุงุช ุงูุชุฎุณูุณ.

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ููุชูุญ ุงููุตุฏุฑ ููููู ุงุณุชุฎุฏุงูู ูุชุนุฏููู ุจุญุฑูุฉ.

---

## ๐ฏ ุงูุฎูุงุตุฉ

โ **ุชู ุชูููุฐ ุฌููุน ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ:**
- ูุธุงู ูุตุงุฏูุฉ ูุตูุงุญูุงุช โ
- ุฅุฏุงุฑุฉ ุงููุฑุถู ูุงููุฉ โ
- ูุธุงู ุงูููุงุณุงุช ุงูุชุงุฑูุฎู โ
- ููุญุฉ ุชุญูู โ
- ูุงุฌูุฉ ุงุญุชุฑุงููุฉ โ
- ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช โ
- ูุงุนุฏุฉ ุจูุงูุงุช SQLite (D1) โ
- API RESTful ูุงูู โ
- ุฌุงูุฒ ูููุดุฑ ุนูู Cloudflare โ

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูุงูุชุทููุฑ!** ๐
